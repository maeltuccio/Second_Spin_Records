// oauth-1.0a@2.2.6 downloaded from https://ga.jspm.io/npm:oauth-1.0a@2.2.6/oauth-1.0a.js

var t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var e={};e=OAuth;function OAuth(e){if(!((this||t)instanceof OAuth))return new OAuth(e);e||(e={});if(!e.consumer)throw new Error("consumer option is required");(this||t).consumer=e.consumer;(this||t).nonce_length=e.nonce_length||32;(this||t).version=e.version||"1.0";(this||t).parameter_seperator=e.parameter_seperator||", ";(this||t).realm=e.realm;"undefined"===typeof e.last_ampersand?(this||t).last_ampersand=true:(this||t).last_ampersand=e.last_ampersand;(this||t).signature_method=e.signature_method||"PLAINTEXT";"PLAINTEXT"!=(this||t).signature_method||e.hash_function||(e.hash_function=function(t,e){return e});if(!e.hash_function)throw new Error("hash_function option is required");(this||t).hash_function=e.hash_function;(this||t).body_hash_function=e.body_hash_function||(this||t).hash_function}OAuth.prototype.authorize=function(e,r){var n={oauth_consumer_key:(this||t).consumer.key,oauth_nonce:this.getNonce(),oauth_signature_method:(this||t).signature_method,oauth_timestamp:this.getTimeStamp(),oauth_version:(this||t).version};r||(r={});void 0!==r.key&&(n.oauth_token=r.key);e.data||(e.data={});e.includeBodyHash&&(n.oauth_body_hash=this.getBodyHash(e,r.secret));n.oauth_signature=this.getSignature(e,r.secret,n);return n};OAuth.prototype.getSignature=function(t,e,r){return this.hash_function(this.getBaseString(t,r),this.getSigningKey(e))};OAuth.prototype.getBodyHash=function(e,r){var n="string"===typeof e.data?e.data:JSON.stringify(e.data);if(!(this||t).body_hash_function)throw new Error("body_hash_function option is required");return this.body_hash_function(n,this.getSigningKey(r))};OAuth.prototype.getBaseString=function(t,e){return t.method.toUpperCase()+"&"+this.percentEncode(this.getBaseUrl(t.url))+"&"+this.percentEncode(this.getParameterString(t,e))};OAuth.prototype.getParameterString=function(e,r){var n;n=r.oauth_body_hash?this.sortObject(this.percentEncodeData(this.mergeObject(r,this.deParamUrl(e.url)))):this.sortObject(this.percentEncodeData(this.mergeObject(r,this.mergeObject(e.data,this.deParamUrl(e.url)))));var o="";for(var a=0;a<n.length;a++){var i=n[a].key;var s=n[a].value;if(s&&Array.isArray(s)){s.sort();var h="";s.forEach(function(t,e){h+=i+"="+t;e<s.length&&(h+="&")}.bind(this||t));o+=h}else o+=i+"="+s+"&"}o=o.substr(0,o.length-1);return o};OAuth.prototype.getSigningKey=function(e){e=e||"";return(this||t).last_ampersand||e?this.percentEncode((this||t).consumer.secret)+"&"+this.percentEncode(e):this.percentEncode((this||t).consumer.secret)};OAuth.prototype.getBaseUrl=function(t){return t.split("?")[0]};OAuth.prototype.deParam=function(t){var e=t.split("&");var r={};for(var n=0;n<e.length;n++){var o=e[n].split("=");o[1]=o[1]||"";if(r[o[0]]){Array.isArray(r[o[0]])||(r[o[0]]=[r[o[0]]]);r[o[0]].push(decodeURIComponent(o[1]))}else r[o[0]]=decodeURIComponent(o[1])}return r};OAuth.prototype.deParamUrl=function(t){var e=t.split("?");return 1===e.length?{}:this.deParam(e[1])};OAuth.prototype.percentEncode=function(t){return encodeURIComponent(t).replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")};OAuth.prototype.percentEncodeData=function(e){var r={};for(var n in e){var o=e[n];if(o&&Array.isArray(o)){var a=[];o.forEach(function(t){a.push(this.percentEncode(t))}.bind(this||t));o=a}else o=this.percentEncode(o);r[this.percentEncode(n)]=o}return r};OAuth.prototype.toHeader=function(e){var r=this.sortObject(e);var n="OAuth ";(this||t).realm&&(n+='realm="'+(this||t).realm+'"'+(this||t).parameter_seperator);for(var o=0;o<r.length;o++)0===r[o].key.indexOf("oauth_")&&(n+=this.percentEncode(r[o].key)+'="'+this.percentEncode(r[o].value)+'"'+(this||t).parameter_seperator);return{Authorization:n.substr(0,n.length-(this||t).parameter_seperator.length)}};OAuth.prototype.getNonce=function(){var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var r="";for(var n=0;n<(this||t).nonce_length;n++)r+=e[parseInt(Math.random()*e.length,10)];return r};OAuth.prototype.getTimeStamp=function(){return parseInt((new Date).getTime()/1e3,10)};OAuth.prototype.mergeObject=function(t,e){t=t||{};e=e||{};var r=t;for(var n in e)r[n]=e[n];return r};OAuth.prototype.sortObject=function(t){var e=Object.keys(t);var r=[];e.sort();for(var n=0;n<e.length;n++){var o=e[n];r.push({key:o,value:t[o]})}return r};var r=e;export default r;

