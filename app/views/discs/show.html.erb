
<div class="product-page row"> <h1 ><%= @disc.title %> - <%= @disc.artist %></h1>
<p></p>
<div class="col-md-8">
  <div class="product-card">
<!-- Cover Image -->
  <% if @disc.cover_url.present? %>
    <div class="cover-image">
      <img src="<%= @disc.cover_url %>" alt="Cover of <%= @disc.title %>" class="img-fluid"/>
    </div>
  <% end %>
  <div class="product-meta ">

    <p><strong>Artist:</strong> <%= @disc.artist %></p>
    <p><strong>Genre:</strong> <%= @disc.genre.presence || "Unknown" %></p>

    <p><strong>Release Date:</strong> <%= @disc.release_date.presence || "Unknown" %></p>
    <p><strong>Label:</strong> <%= @disc.label.presence || "Unknown" %></p>
    <p><strong>Catalog Number:</strong> <%= @disc.cat_number.presence || "N/A" %></p>
    <p><strong>Suggested Price:</strong> <%= number_to_currency(@disc.suggested_price) %></p>

<!-- Contact seller button  -->

    <% @disc.collections.each do |collection|%>
      <%= link_to "Contact Seller", chat_with_owner_path(collection.user), class: "btn btn-call-to-action  mt-3" unless collection.user == current_user %>
    <% end %>

 <!-- Wishlist Button -->

    <%= link_to disc_wishlists_path(@disc), data: { turbo_method: :post }, class: "btn btn-wishlist mt-3" do %>
      <i class="fa-solid fa-heart"></i>
    <% end %>
  </div>
</div>
<div class="comment-section">

    <!-- Commentaires -->
    <%= render "comments/form" %>


  <!-- Liste des commentaires -->
  <div id="comments_list">
    <%= render partial: "comments/comment", collection: @disc.comments, as: :comment %>
  </div>
</div>
</div>
<div class="col-md-4">


  <%= render "music_player", disc: @disc %>

  <% if @disc.tracks.present? %>
    <ul class="track-list">
      <% @disc.tracks.each do |track| %>
        <li><%= track.name %></li>
      <% end %>
    </ul>
  <% else %>
    <p>No tracks available.</p>
  <% end %>
<!-- Recommendations -->
   <!-- Navigation Links -->
<div class="product-nav">
  <%= link_to "See more recommendations", reco_disc_path(@disc), class: "btn btn-wishlist mt-3" %>
  <%= link_to "Back to all discs", discs_path, class: "btn btn-call-to-action  mt-3" %><br>
</div><h2>Recommendations:</h2>
  <% if @recommended_discs.present? %>
    <div class="recommended-list">
      <% @recommended_discs.each do |recommended_disc| %>
        <div class="recommended-disc">
          <%= link_to disc_path(recommended_disc) do %>
         <div class="card-mini poppins-italic">
      <div class="card-mini-content">
        <h3 class="card-mini-title"><%= recommended_disc.title %></h3>
        <p><strong>Artist:</strong> <%= recommended_disc.artist %></p>
        <p><strong>Genre:</strong> <%= recommended_disc.genre %></p>
        <p><strong>Label:</strong> <%= recommended_disc.label %></p>
        <p><strong>Release Date:</strong> <%= recommended_disc.release_date.present? ? recommended_disc.release_date : "Unknown" %></p>
        <p><strong>Catalog Number:</strong> <%= recommended_disc.cat_number %></p>
    </div>

      <!-- Affichage de l'image de couverture si elle existe -->
      <% if recommended_disc.cover_url.present? %>
        <div class="card-mini-image" style="background-image: url('<%= recommended_disc.cover_url %>');"></div>
      <% end %>
    </div>
        </div>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <p>No recommendations available.</p>
  <% end %>



</div>





</div>
